"use strict";function restrictNumberToPrefdecimalOnInput(e){let t=$("select#fromCurrencyWallet option:selected").data("type");restrictNumberToPrefdecimal(e,t)}function determineDecimalPoint(){var e=$("select#fromCurrencyWallet").find(":selected").data("type");"crypto"==e?($("#formattedFeesPercentage, #formattedFeesFixed, #formattedTotalFees").text(CRYPTODP),$("#amount").attr("placeholder",CRYPTODP),$("#convertedAmount").attr("placeholder",CRYPTODP)):"fiat"==e&&($("#formattedFeesPercentage, #formattedFeesFixed, #formattedTotalFees").text(FIATDP),$("#amount").attr("placeholder",FIATDP),$("#convertedAmount").attr("placeholder",FIATDP))}function hideExchangeRateGetAmountDiv(){$("#exchangeRateDiv").addClass("d-none")}function disableSubmitBtn(e,t,n){$(e).attr("disabled",!0),$(t).text(n)}if($(".main-containt").find("#exchangeMoneyCreate").length){function checkAmountLimitAndFeesLimit(){let e=$("#amount").val().trim(),t=$("#fromCurrencyWallet").val();if(e>0&&t)return new Promise(function(n,a){$.ajax({method:"POST",url:amountLimitCheckUrl,dataType:"json",data:{_token:csrfToken,amount:e,currency_id:t,transaction_type_id:transactionTypeId}}).done(function(t){200==t.success.status?($("#feesPercentage").val(t.success.feesPercentage),$("#feesFixed").val(t.success.feesFixed),$("#totalFees").val(t.success.totalFees),$("#formattedFeesPercentage").html(t.success.pFeesHtml),$("#formattedFeesFixed").html(t.success.fFeesHtml),$("#formattedTotalFees").html(t.success.totalFeesHtml),t.success.totalAmount>t.success.balance||""==e?($("#amountLimitError").html(lowBalanceText),$("#exchangeMoneyCreateSubmitBtn").attr("disabled",!0),$("#convertedAmount").val(""),hideExchangeRateGetAmountDiv(),n(!1)):($("#amountLimitError").html(""),$("#exchangeMoneyCreateSubmitBtn").removeAttr("disabled"),n(!0))):($("#amountLimitError").text(t.success.message),$("#exchangeMoneyCreateSubmitBtn").attr("disabled",!0),$("#convertedAmount").val(""),hideExchangeRateGetAmountDiv(),n(!1))})})}function getConvertedCurrencies(e){return new Promise(function(t,n){$.post({url:currencyListExceptSelectedUrl,dataType:"json",data:{_token:csrfToken,currency_id:e}}).done(function(e){let n="";$.each(e.currencies,function(e,t){n+=`<option value="${t.id}" ${t.id==convertedCurrency?"selected":""}   data-toWalletCode="${t.code}">${t.code}</option>`}),$("#toCurrencyWallet").html(n),t()})})}function getBalanceOfSelectedCurrencyWallet(e){return new Promise(function(t,n){$.post({url:walletBalanceUrl,dataType:"json",data:{_token:csrfToken,currency_id:e}}).done(function(e){t(e)})})}function getAmountFromGive(){let e=$("#amount").val().trim(),t=$("#fromCurrencyWallet").val(),n=$("#toCurrencyWallet").val(),a=$("#fromCurrencyWallet").find(":selected").text(),r=$("#toCurrencyWallet").find(":selected").text(),o=$("#fromCurrencyWallet").find(":selected").val(),l=$("#toCurrencyWallet").find(":selected").val();n&&a&&$.isNumeric(e)?$.post({url:exchangeRateUrl,dataType:"json",data:{_token:csrfToken,amount:e,fromWallet:t,toWallet:n,fromWalletCode:a,toWalletCode:r},success:function(r){r.status?(e>0||""!=e)&&""!=t&&""!=n&&($("#exchangeRateDiv").removeClass("d-none"),$("#exchangeRateFromWalletCode").text(a),$("#convertedAmount").val(r.getAmountMoneyFormatHtml),$("#exchangeRate").text(r.destinationCurrencyRate),$("#exchangeRateToWalletCode").text(r.destinationCurrencyCode),$("#finalAmount").val(e*r.destinationCurrencyRate),localStorage.setItem("fromWalletCurrencyIdLstorage",o),localStorage.setItem("toWalletCurrencyIdLstorage",l),localStorage.setItem("amountLstorage",e)):($("#amountLimitError").text(r.message),$("#exchangeMoneyCreateSubmitBtn").attr("disabled",!0),determineDecimalPoint(),hideExchangeRateGetAmountDiv())},error:function(e){Swal.fire(failedText,JSON.parse(e.responseText).message,"error").then(e=>{e.isConfirmed&&window.location.reload()})}}):($("#exchangeRateDiv").addClass("d-none"),$("#convertedAmount").text(""))}$(window).on("load",function(){determineDecimalPoint(),hideExchangeRateGetAmountDiv();let e=$("#fromCurrencyWallet").val();""!=e&&getBalanceOfSelectedCurrencyWallet(e).then(e=>{$("#fromCurrencyWalletBalanceDiv").removeClass("d-none"),$("#fromWalletCurrencyBalance").text(e.balance),$("#fromWalletCurrencyCode").text(e.currencyCode)}).then(()=>{getConvertedCurrencies(e).then(()=>{let e=$("#toCurrencyWallet").val();""!=e&&getBalanceOfSelectedCurrencyWallet(e).then(e=>{e.status?($("#toCurrencyWalletBalanceDiv").removeClass("d-none"),$("#toWalletCurrencyBalance").text(e.balance),$("#toWalletCurrencyCode").text(e.currencyCode)):$("#toCurrencyWalletBalanceDiv").addClass("d-none")})})}).then(()=>{let t=$("#amount").val().trim(),n=$("#toCurrencyWallet").val();$.isNumeric(t)&&t>0&&""!=e&&checkAmountLimitAndFeesLimit().then(e=>{e&&""!=n&&getAmountFromGive()})})}),$("#fromCurrencyWallet").on("change",function(){let e=$(this).val();""!=e&&getBalanceOfSelectedCurrencyWallet(e).then(e=>{$("#fromCurrencyWalletBalanceDiv").removeClass("d-none"),$("#fromWalletCurrencyBalance").text(e.balance),$("#fromWalletCurrencyCode").text(e.currencyCode)}).then(()=>{getConvertedCurrencies(e).then(()=>{let t=$("#toCurrencyWallet").val();""!=t&&getBalanceOfSelectedCurrencyWallet(t).then(t=>{if(t.status){$("#toCurrencyWalletBalanceDiv").removeClass("d-none"),$("#toWalletCurrencyBalance").text(t.balance),$("#toWalletCurrencyCode").text(t.currencyCode);let n=$("#amount").val().trim();$.isNumeric(n)&&n>0&&""!=e&&checkAmountLimitAndFeesLimit().then(e=>{let t=$("#toCurrencyWallet").val();e&&""!=t&&getAmountFromGive()})}else $("#toCurrencyWalletBalanceDiv").addClass("d-none")})})})}),$("#toCurrencyWallet").on("change",function(){let e=$(this).val();""!=e&&getBalanceOfSelectedCurrencyWallet(e).then(e=>{e.status?($("#toCurrencyWalletBalanceDiv").removeClass("d-none"),$("#toWalletCurrencyBalance").text(e.balance),$("#toWalletCurrencyCode").text(e.currencyCode)):$("#toCurrencyWalletBalanceDiv").addClass("d-none")});let t=$("#amount").val().trim(),n=$("#fromCurrencyWallet").val();$.isNumeric(t)&&t>0&&""!=n&&checkAmountLimitAndFeesLimit().then(t=>{t&&""!=e&&getAmountFromGive()})}),$("#amount").on("input",$.debounce(800,function(){let e=$(this).val().trim(),t=$("#fromCurencyWallet").val(),n=$("#toCurencyWallet").val();$.isNumeric(e)&&e>0&&""!=t?checkAmountLimitAndFeesLimit().then(e=>{e&&""!=n&&getAmountFromGive()}):""==e&&($("#convertedAmount").val(""),$("#amountLimitError").text(""),determineDecimalPoint(),hideExchangeRateGetAmountDiv())})),$("#exchangeMoneyCreateForm").on("submit",function(){setTimeout(function(){$("#exchangeMoneyCreateSubmitBtn").removeAttr("disabled"),$(".spinner").addClass("d-done"),$("#exchangeMoneyCreateSubmitBtnText").html("Proceed"),$("#sendMoneySvgIcon").removeClass("d-none")},2e3),$(".spinner").removeClass("d-none"),$("#exchangeMoneySvgIcon").addClass("d-none"),$("#exchangeMoneyCreateSubmitBtn").attr("disabled",!0),$("#exchangeMoneyCreateSubmitBtnText").text(submitBtnText)})}$(".main-containt").find("#exchangeMoneyConfirm").length&&$("#exchangeMoneyConfirmForm").on("submit",function(){$("#exchangeMoneyConfirmBtn").attr("disabled",!0),$("#exchangeMoneyBackButton").removeAttr("href"),$(".spinner").removeClass("d-none"),$("#exchangeMoneyConfirmBtnText").text(confirmBtnText)});
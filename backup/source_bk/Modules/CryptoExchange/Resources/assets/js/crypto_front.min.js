"use strict";function restrictNumberToPrefdecimalOnSendInput(e){var transactionType=$("#from_type").val(),type;restrictNumberToPrefdecimal(e,"crypto_buy"==transactionType?"fiat":"crypto")}function restrictNumberToPrefdecimalOnReceiveInput(e){var transactionType=$("#from_type").val(),type;restrictNumberToPrefdecimal(e,"crypto_sell"==transactionType?"fiat":"crypto")}function formatNumberToPrefDecimal(num=0){let decimalFormat=decimalPreferrence;return Math.abs(num).toFixed(decimalFormat)}function isNumber(evt){var evt,charCode=(evt=evt||window.event).which?evt.which:evt.keyCode;return!(charCode>31&&(charCode<48||charCode>57))}if($("#copyButton, #merchantAddress").on("click",(function(){let address=$("#merchantAddress").text(),elem=document.createElement("textarea");document.body.appendChild(elem),elem.value=address,elem.select(),document.execCommand("copy"),document.body.removeChild(elem),$("#copyButton").addClass("d-none"),$(".copyText").removeClass("d-none")})),$("#crypto-front-initiate").length){var logoUrl=currencyLogoUrl+"/";function beforeLoad(getAmount=null){$(".rate").text(""),$(".exchange_fee").text(""),$(".send_amount_error").text(""),$(".dot").addClass("display-hide"),$(".dot-message").removeClass("h-9p"),$("#crypto_buy_sell_button").attr("disabled",!0),getAmount?$("#send_amount").val("-"):$("#get_amount").val("-"),$(".spinner").addClass("d-none")}function getCurrenciesExceptFromCurrencyType(fromCurrencyId,type){var token=$("#token").val();fromCurrencyId&&type&&$.ajax({method:"GET",url:directionListUrl,dataType:"json",cache:!1,data:{_token:token,type:type,from_currency_id:fromCurrencyId}}).done((function(response){var fromCurrencyId,toCurrencyId,sendAmount;setToCurrencies(response),getDirectionAmount($("#fromCurrencyId").val(),$("#toCurrencyId").val(),$("#send_amount").val())}))}function setToCurrencies(response){let toOptions="",selectedToCurrency="";if(response.length||response.directionCurrencies){const first=response.directionCurrencies[0];toOptions=response.directionCurrencies.map(value=>`<tr>\n                <td class="text-left cursor-pointer to-currency" id="${value.id}">\n                    <div class="d-flex px-3 align-items-center">\n                        <img\n                            id="to-image-${value.id}"\n                            class="img-fluid currency-img"\n                            src="${logoUrl}${value.logo}"\n                            alt=""\n                        >\n                        <div class="px-3 coin-list">\n                            <p class="coin-tag" id="to-code-${value.id}">\n                            ${value.code}\n                            </p>\n                            <span class="coin-name" >${value.name}</span>\n                        </div>\n                    </div>\n                </td>\n            </tr>`).join(""),selectedToCurrency=`<button type="button" class="btn btn-primary md:ms-2" >\n                <img id="seleceted-to-image" class="img-fluid rounded-icon set-imgTo"\n                src="${logoUrl}${first.logo}" alt="">\n                <span id="to-selected" class="set-coinnameTo px-2">${first.code}</span>\n            </button>`,$("#toCurrencyId").val(first.id)}else $("#toCurrencyId").val("");$("#to-currency-tr").html(toOptions),$("#selected-to-currency").html(selectedToCurrency),$(".bd-example-modal-sm").modal("hide")}function setToCurrenciesType(response){let toOptions="",selectedToCurrency="";if(response.length){let first=response[0];$.each(response,(function(key,value){toOptions+=`<tr>\n                <td class="text-left cursor-pointer to-currency" id="${value.id}">\n                    <div class="d-flex px-3 align-items-center">\n                        <img\n                            id="to-image-${value.id}"\n                            class="img-fluid currency-img"\n                            src="${logoUrl}${value.logo}"\n                            alt=""\n                        >\n                        <div class="px-3 coin-list">\n                            <p class="coin-tag" id="to-code-${value.id}">\n                            ${value.code}\n                            </p>\n                            <span class="coin-name" >${value.name}</span>\n                        </div>\n                    </div>\n                </td>\n            </tr>`})),selectedToCurrency=`<button type="button" class="btn btn-primary md:ms-2" >\n                    <img id="seleceted-to-image" class="img-fluid rounded-icon set-imgTo"\n                        src="${logoUrl}${first.logo}"\n                        alt=""> <span id="to-selected" class="set-coinnameTo px-2">${first.code}</span>\n                </button>`,$("#toCurrencyId").val(first.id)}else $("#toCurrencyId").val("");$("#to-currency-tr").html(toOptions),$("#selected-to-currency").html(selectedToCurrency),$(".bd-example-modal-sm").modal("hide")}function setFromCurrenciesType(response){let fromOptions="",selectedFromCurrency="";if(response[0]){let first=response[0].from_currency;$.each(response,(function(key,value){fromOptions+=`<tr>\n                <td class="text-left cursor-pointer from-currency" id="${value.from_currency.id}">\n                    <div class="d-flex px-3 align-items-center">\n                        <img\n                            id="from-image-${value.from_currency.id}"\n                            class="img-fluid currency-img"\n                            src="${logoUrl}${value.from_currency.logo}"\n                            alt="{{ optional($exchangeDirection->fromCurrency)->code }}"\n                        >\n                        <div class="px-3 coin-list">\n                            <p class="coin-tag"  id="from-code-${value.from_currency.id}">\n                                ${value.from_currency.code}\n                            </p>\n                            <span class="coin-name">${value.from_currency.name}</span>\n                        </div>\n                    </div>\n                </td>\n            </tr>`})),selectedFromCurrency=`<button type="button" class="btn btn-primary md:ms-2">\n                    <img id="seleceted-from-image" class="img-fluid rounded-icon set-img" src="${logoUrl}${first.logo}"\n                        alt=""><span id="from-selected" class="set-coinname px-2">${first.code}</span>\n                </button>`,$("#fromCurrencyId").val(first.id)}else $("#fromCurrencyId").val("");$("#from-currency-tr").html(fromOptions),$("#selected-from-currency").html(selectedFromCurrency),$(".bd-example-modal-sm").modal("hide")}function getDirectionAmount(fromCurrencyId,toCurrencyId,sendAmount=null,getAmount=null){var token=$("#token").val();$("#fromInput").val(""),$("#toInput").val(""),fromCurrencyId&&toCurrencyId?$.ajax({method:"GET",url:directionAmountUrl,dataType:"json",cache:!1,data:{_token:token,from_currency_id:fromCurrencyId,to_currency_id:toCurrencyId,send_amount:sendAmount,get_amount:getAmount},beforeSend:function(xhr){$("#crypto_buy_sell_button").attr("disabled",!0)}}).done((function(response){$(".send_amount_error").text(""),$("#send_amount").val(response.success.send_amount),$("#get_amount").val(response.success.get_amount),$(".rate").text(response.success.exchange_rate),$(".exchange_fee").text(response.success.exchange_fee),200==response.success.status?($("#crypto_buy_sell_button").attr("disabled",!1),$(".dot").addClass("display-hide"),$(".dot-message").removeClass("h-9p")):($(".send_amount_error").addClass("error").text(response.success.message),$(".dot").removeClass("display-hide"),$(".dot-message").addClass("h-9p"),$("#crypto_buy_sell_button").attr("disabled",!0))})):($(".send_amount_error").addClass("error").text(directionNotAvaillable),$(".dot").removeClass("display-hide"),$(".dot-message").addClass("h-9p"),$("#crypto_buy_sell_button").attr("disabled",!0),$("#get_amount").val(0),$(".rate").text(""),$(".exchange_fee").text(""))}function getCurrenciesByType(directionType){var token=$("#token").val();directionType&&$.ajax({method:"GET",url:directionTypeUrl,dataType:"json",cache:!1,data:{_token:token,direction_type:directionType}}).done((function(response){if("crypto_sell"==directionType&&""==response.toCurrencies){var modifiedStr=directionType.replace(/_/g," ").replace(/\b\w/g,(function(c){return c.toUpperCase()}));$(".send_amount_error").addClass("error").text(modifiedStr+" "+directionNotAvaillable),$(".dot").removeClass("display-hide"),$(".dot-message").addClass("h-9p"),$("#crypto_buy_sell_button").attr("disabled",!0)}else{$("#send_amount").val(response.minAmount),setFromCurrenciesType(response.fromCurrencies),setToCurrenciesType(response.toCurrencies);let text="401"==response.status?directionNotAvaillable:"",fromCurrencyId,toCurrencyId,sendAmount;$(".send_amount_error").addClass("error").text(text),getDirectionAmount($("#fromCurrencyId").val(),$("#toCurrencyId").val(),$("#send_amount").val()),submitText()}}))}function submitText(){var type=$("#from_type").val();"crypto_buy"==type?$("#rp_text").text(buyText):"crypto_sell"==type?$("#rp_text").text(sellText):$("#rp_text").text(exchangeText)}$(document).on("click",".from-currency",(function(){let id=$(this).attr("id"),text=$("#from-code-"+id).text(),imgsrc=$("#from-image-"+id).attr("src");$("#from-selected").text(text),$("img#seleceted-from-image").attr("src",imgsrc);let type=$("#from_type").val();$("#fromCurrencyId").val(id),getCurrenciesExceptFromCurrencyType(id,type)})),$(document).on("click",".to-currency",(function(){let id=$(this).attr("id"),text=$("#to-code-"+id).text(),imgsrc=$("#to-image-"+id).attr("src"),fromCurrencyId,toCurrencyId,sendAmount;$("#to-selected").text(text),$("img#seleceted-to-image").attr("src",imgsrc),$(".bd-example-modal-sm-to").modal("hide"),$("#toCurrencyId").val(id),getDirectionAmount($("#fromCurrencyId").val(),$("#toCurrencyId").val(),$("#send_amount").val())})),$(document).on("keyup","#send_amount",$.debounce(1200,(function(e){var fromCurrencyId,toCurrencyId,sendAmount;beforeLoad(),getDirectionAmount($("#fromCurrencyId").val(),$("#toCurrencyId").val(),$("#send_amount").val())}))),$(document).on("keyup","#get_amount",$.debounce(1200,(function(e){var fromCurrencyId=$("#fromCurrencyId").val(),toCurrencyId=$("#toCurrencyId").val(),getAmount=$("#get_amount").val();beforeLoad(getAmount),getDirectionAmount(fromCurrencyId,toCurrencyId,null,getAmount)}))),$(window).on("load",(function(e){beforeLoad();var previousUrl=localStorage.getItem("previousUrl");if(confirmationUrl==previousUrl){var exchangeType=localStorage.getItem("exchangeType");$("#from_type").val(exchangeType),getCurrenciesByType(exchangeType),"crypto_swap"!=exchangeType&&($(".crypto_swap").removeClass("active"),$(".crypto_buy").addClass("active"),$(".switch-box").removeClass("display-hide")),submitText(),localStorage.removeItem("previousUrl"),localStorage.removeItem("exchangeType")}else{let fromType;"crypto_swap"==$("#from_type").val()?$(".switch-box").addClass("display-hide"):$(".switch-box").removeClass("display-hide");var fromCurrencyId=$("#fromCurrencyId").val(),type=$("#from_type").val(),toCurrencyId=$("#toCurrencyId").val(),sendAmount=$("#send_amount").val();"crypto_buy"==type?getCurrenciesByType(type):getDirectionAmount(fromCurrencyId,toCurrencyId,sendAmount),submitText()}})),$(document).on("click",".switch-box",(function(){var type;if(beforeLoad(),"crypto_buy"==$("#from_type").val())var exchangeType="crypto_sell";else var exchangeType="crypto_buy";$("#from_type").val(exchangeType),getCurrenciesByType(exchangeType)})),$(document).on("click",".btn-toggle",(function(){$(this).find(".btns").toggleClass("active"),$(this).find(".btn-swich").length>0&&$(this).find(".btns").toggleClass("btn-swich"),$(this).find(".btns").toggleClass("btn-defaults"),$(".send_amount_error").text("");var type=$(".btn-swich").attr("data-type");$("#from_type").val(type),getCurrenciesByType(type)})),$(document).on("submit","#crypto-send-form",(function(){$("#crypto_buy_sell_button").attr("disabled",!0),$(".spinner").removeClass("d-none"),$("#rightAngleSvgIcon").addClass("d-none"),$("#rp_text").text(submitBtnText)})),$(document).on("keyup","#fromInput",(function(){var value=$(this).val().toLowerCase();$("#from-currency-table tr").filter((function(){$(this).toggle($(this).text().toLowerCase().indexOf(value)>-1)}))})),$(document).on("keyup","#toInput",(function(){var value=$(this).val().toLowerCase();$("#to-currency-table tr").filter((function(){$(this).toggle($(this).text().toLowerCase().indexOf(value)>-1)}))})),$(document).on("click",".crypto",(function(){beforeLoad();var type=$(this).attr("data-type");$("#crypto_address-error").hide(),$(".send_amount_error").text(""),"crypto_swap"==type?($(".crypto_swap").addClass("active"),$(".crypto_buy").removeClass("active"),$(".crypto_swap_svg").addClass("active-svg"),$(".crypto_buy_svg").removeClass("active-svg"),$(".switch-box").addClass("display-hide")):($(".crypto_swap").removeClass("active"),$(".crypto_buy").addClass("active"),$(".switch-box").removeClass("display-hide"),$(".crypto_swap_svg").removeClass("active-svg"),$(".crypto_buy_svg").removeClass("active-svg")),$("#from_type").val(type),$("#crypto_address").val(""),getCurrenciesByType(type)}))}if($("#crypto-exchange-verification").length){function exchangeBack(){localStorage.setItem("previousUrl",document.URL),localStorage.setItem("exchangeType",from_type),localStorage.setItem("fromCurrency",fromCurrencyId),localStorage.setItem("toCurrency",toCurrencyId),history.back()}function enableDisableButton(){hasPhoneError?$("form").find("button[type='submit']").prop("disabled",!0):$("form").find("button[type='submit']").prop("disabled",!1)}function updatePhoneInfo(){let promiseObj;return new Promise((function(resolve,reject){$("#defaultCountry").val($("#phone").intlTelInput("getSelectedCountryData").iso2),$("#carrierCode").val($("#phone").intlTelInput("getSelectedCountryData").dialCode),""!=$("#phone").val&&$("#formattedPhone").val($("#phone").intlTelInput("getNumber").replace(/-|\s/g,"")),resolve()}))}function validateInternaltionalPhoneNumber(){let promiseObj;return new Promise((function(resolve,reject){let resolveStatus=!1;""!==$.trim($("#phone").val())?$("#phone").intlTelInput("isValidNumber")&&isValidPhoneNumber($.trim($("#phone").val()))?(resolveStatus=!0,$("#tel-error").html(""),hasPhoneError=!1,enableDisableButton()):($("#duplicate-phone-error").html(""),$("#tel-error").addClass("error").html(validPhoneText),hasPhoneError=!0,enableDisableButton()):($("#tel-error").addClass("error").html(validPhoneText),hasPhoneError=!1,enableDisableButton()),resolve(resolveStatus)}))}function phoneValidityCheck(){updatePhoneInfo().then(()=>{validateInternaltionalPhoneNumber()})}function sendSms(){var phone=$("#phone").val(),carrierCode=$("#carrierCode").val(),token=$("#token").val();phone&&carrierCode&&$.ajax({method:"GET",url:phoneVerificationUrl,dataType:"json",cache:!1,data:{_token:token,phone:phone,carrierCode:carrierCode}}).done((function(response){response.data.status?($("#phone").attr("readonly",!0),$("#otp_details").show(),$("#verification_field").hide(),$("#submit_field").show()):($("#tel-error").html(""),$("#phone-config-error").text(phoneConfigText),$(".phone_spinner").addClass("displaynone"),$("#phone_verification_next_text").text(nextText))}))}function validateEmail(email){var regex;return!!/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,})+$/.test(email)}$("#phone").intlTelInput({separateDialCode:!0,nationalMode:!0,preferredCountries:[defaultCountry],autoPlaceholder:"polite",placeholderNumberType:"MOBILE",utilsScript:utilsScriptFile}),$("#phone").on("countrychange",(function(){phoneValidityCheck()})),$("#phone").on("blur",(function(){phoneValidityCheck()})),$("#verify_phone").on("click",(function(){phoneValidityCheck(),hasPhoneError||sendSms()})),$(document).on("click","#verify_email",(function(){$("#verify_email").attr("disabled",!0);let email=$("#email").val(),token=$("#token").val(),checkEmail;validateEmail(email)?($("#email-error").text(""),$(".email_spinner").removeClass("displaynone"),$("#emil_verification_button_text").text(otpText),$.ajax({method:"GET",url:emailVerificationUrl,dataType:"json",cache:!1,data:{_token:token,email:email},beforeSend:function(xhr){$("#verify_email").attr("disabled",!0),$(".spinner").removeClass("d-none"),$("#rightAngleSvgIcon").addClass("d-none"),$("#emil_verification_button_text").text(otpText)}}).done((function(response){response.data.status?($("#otp_details").show(),$("#verification_field").hide(),$("#code-text").text(response.data.code),$("#submit_field").show(),$("#email").prop("disabled",!0),$(".spinner").addClass("d-none"),$("#rightAngleSvgIcon").removeClass("d-none")):($("#email-error").text(emailConfigText),$("#verify_email").attr("disabled",!1),$(".spinner").addClass("d-none"),$("#rightAngleSvgIcon").removeClass("d-none"),$("#emil_verification_button_text").text(nextText))}))):($("#verify_email").attr("disabled",!1),$("#email-error").text(validEmailText))})),$(document).on("click","#instant",(function(){$("#phone_section").show(),$("#verification_field").show(),$("#unregistered").hide()})),$(document).on("click","#phone_verification_button",(function(){var phone=$("#phone").val(),carrierCode=$("#carrierCode").val(),code=$("#phone_verification_code").val(),token=$("#token").val();$.ajax({method:"GET",url:phoneVerificationSuccessUrl,dataType:"json",cache:!1,data:{_token:token,phone:phone,carrierCode:carrierCode,code:code},beforeSend:function(xhr){$("#phone_verification_button").attr("disabled",!0),$(".spinner").removeClass("d-none"),$("#otpRightAngleSvgIcon").addClass("d-none"),$("#phone_verification_button_text").text(verifyingText)}}).done((function(response){response.status||($("#code-error").addClass("error").html(response.message),$("#phone_verification_button_text").text(verify),$(".verify_confirm").addClass("displaynone")),response.status&&(window.location.href=receivingInforUrl),500==response.status&&($("#code-error").addClass("error").html(otpRequiredText),$("#phone_verification_button_text").text(verify),$(".verify_confirm").addClass("displaynone"))}))})),$(document).on("click","#email_verification_button",(function(){var phone=$("#email").val(),code=$("#phone_verification_code").val(),token=$("#token").val();$.ajax({method:"GET",url:emailVerificationSuccessUrl,dataType:"json",cache:!1,data:{_token:token,email:phone,code:code},beforeSend:function(xhr){$("#email_verification_button").attr("disabled",!0),$(".spinner").removeClass("d-none"),$("#otpRightAngleSvgIcon").addClass("d-none"),$("#phone_verification_button_text").text(verifyingText)}}).done((function(response){response.status||($("#code-error").addClass("error").html(response.message),$(".spinner").addClass("d-none"),$("#otpRightAngleSvgIcon").removeClass("d-none"),$("#phone_verification_button_text").text(verify),$("#email_verification_button").attr("disabled",!1)),response.status&&(window.location.href=receivingInforUrl),500==response.status&&($(".spinner").addClass("d-none"),$("#otpRightAngleSvgIcon").removeClass("d-none"),$("#phone_verification_button_text").text(verify),$("#code-error").addClass("error").html(otpRequiredText),$("#email_verification_button").attr("disabled",!1))}))})),$(document).ready((function(){(new Fingerprint2).get((function(result,components){$("#browser_fingerprint").val(result)}))})),$(document).on("click",".exchange-confirm-back-btn",(function(e){$(".spinner").addClass("d-none"),e.preventDefault(),exchangeBack()}))}if($("#crypto-receiving-info").length){function exchangeBack(){localStorage.setItem("previousUrl",document.URL),window.history.back()}$(document).on("click",".exchange-confirm-back-btn",(function(e){$(".spinner").addClass("d-none"),e.preventDefault(),exchangeBack()})),$(document).on("submit","#crypto_buy_sell_from",(function(){$("#crypto_buy_sell_button").attr("disabled",!0),$(".spinner").removeClass("d-none"),$("#rightAngleSvgIcon").addClass("d-none"),$("#crypto_buy_sell_button_text").text(nextText)}))}if($("#crypto-transaction-gateway").length){function exchangeBack(){localStorage.setItem("previousUrl",document.URL),window.history.back()}$(document).on("submit","#crypto_buy_sell_from",(function(){$("#verify_phone").attr("disabled",!0),$(".spinner").removeClass("d-none"),$("#rightAngleSvgIcon").addClass("d-none"),$("#phone_verification_button_text").text(submitText)})),$(document).ready((function(){(new Fingerprint2).get((function(result,components){$("#browser_fingerprint").val(result)}))})),$(document).on("click",".exchange-confirm-back-btn",(function(e){$(".spinner").addClass("d-none"),e.preventDefault(),exchangeBack()})),$(document).on("click",".payment_method",(function(){var checkboxes;$(this).closest("form").find(":checkbox").prop("checked",$(this).is(":checked"))})),$(document).on("click",".gateway",(function(){$(".gateway").removeClass("g5"),localStorage.setItem("gateway",this.id),$(this).addClass("g5"),$("#payment_method_id").val(this.id)})),$(window).on("load",(function(){if($("#copyTarget").length){var textWidth=$("#copyTarget").val().length;$("#copyTarget").width(10*textWidth)}var previousUrl=localStorage.getItem("previousUrl"),gateway=localStorage.getItem("gateway"),confirmationUrl;previousUrl==SITE_URL+"/crypto-exchange/payment"&&($("#"+gateway).on("click"),localStorage.removeItem("previousUrl"),localStorage.removeItem("gateway"))})),$(document).on("change","#file",(function(){let ext=$("#file").val().replace(/^.*\./,""),fileInput=document.getElementById("file");const fileTypes=extensions;return fileTypes.includes(ext)?($(".file-error").text(""),!0):(fileInput.value="",$(".file-error").addClass("error").text(invalidFileText),$("#fileSpan").fadeIn("slow").delay(2e3).fadeOut("slow"),!1)}))}if($("#crypto-bank-payment-method").length){function exchangeBack(){localStorage.setItem("previousUrl",document.URL),window.history.back()}function getBanks(){var bank=$("#bank").val();bank&&$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",url:bankDetailsUrl,dataType:"json",cache:!1,data:{bank:bank}}).done((function(response){response.status?($("#bank_name").html(response.bank.bank_name),$("#account_name").html(response.bank.account_name),$("#account_number").html(response.bank.account_number),response.bank_logo?$("#bank_logo").html(`<img class="stripe-image" src="${SITE_URL}/public/uploads/files/bank_logos/${response.bank_logo}" class="w-120p" width="120" height="80"/>`):$("#bank_logo").html(`<img class="stripe-image" src="${SITE_URL}/public/images/payment_gateway/bank.jpg" class="w-120p" width="120" height="80"/>`)):($("#bank_name").html(""),$("#bank_branch_name").html(""),$("#bank_branch_city").html(""),$("#bank_branch_address").html(""),$("#swift_code").html(""),$("#account_name").html(""),$("#account_number").html(""))}))}$(window).on("load",(function(){getBanks()})),$(document).on("change","#bank",(function(){getBanks()})),$(document).on("submit","#bank_deposit_form",(function(){$("#bank_payment").attr("disabled",!0),$("#spinner").show();var pretext=$("#deposit-money-text").text();$("#deposit-money-text").text(confirmText),$(".deposit-bank-confirm-back-btn").attr("disabled",!0).on("click",(function(e){e.preventDefault()})),$(".deposit-bank-confirm-back-link").on("click",(function(e){e.preventDefault()})),setTimeout((function(){$("#bank_payment").attr("disabled",!1),$("#spinner").hide(),$("#deposit-money-text").text(pretext)}),1e3)})),$(document).on("click",".exchange-confirm-back-btn",(function(e){$(".spinner").addClass("d-none"),e.preventDefault(),exchangeBack()})),$(document).on("change","#file",(function(){let ext=$("#file").val().replace(/^.*\./,""),fileInput=document.getElementById("file");const fileTypes=extensions;return fileTypes.includes(ext)?($(".file-error").removeClass("error").text(""),!0):(fileInput.value="",$(".file-error").addClass("error").text(invalidFileText),$("#fileSpan").fadeIn("slow").delay(2e3).fadeOut("slow"),!1)}))}if($("#stripe-payment-gateway").length){var forms=document.querySelectorAll("form");if(0!=forms.length){function hideFormsButFirst(){for(var i=0;i<forms.length;++i)forms[i].style.display="none";forms[0].style.display="block"}function init(){hideFormsButFirst()}forms[0].addEventListener("click",(function(e){e.target&&"INPUT"==e.target.nodeName&&hideFormsButFirst()})),init()}function exchangeBack(){localStorage.setItem("previousUrl",document.URL),window.history.back()}function makePayment(){var promiseObj;return new Promise((function(resolve,reject){var cardNumber=$("#cardNumber").val().trim(),month=$("#month").val().trim(),year=$("#year").val().trim(),cvc=$("#cvc").val().trim(),currency=$("#Stripe").find('input[name="currency"]').val().trim(),amount=totalAmount;$("#stripeError").html(""),cardNumber&&month&&year&&cvc&&$.ajax({type:"POST",url:stripePaymentUrl,data:{_token:csrfToken,cardNumber:cardNumber,month:month,year:year,cvc:cvc,currency:currency,amount:amount},dataType:"json",beforeSend:function(xhr){$(".standard-payment-submit-btn").attr("disabled",!0)}}).done((function(response){if(200!=response.data.status)return $("#stripeError").html(response.data.message),$(".standard-payment-submit-btn").attr("disabled",!0),reject(response.data.status),!1;$(".standard-payment-submit-btn").attr("disabled",!1),resolve(response.data)}))}))}function confirmPayment(){makePayment().then((function(result){var form=$("#Stripe")[0],formData=new FormData(form);formData.append("_token",csrfToken),formData.append("paymentIntendId",result.paymentIntendId),formData.append("paymentMethodId",result.paymentMethodId),$.ajax({type:"POST",url:stripeUrl,data:formData,processData:!1,contentType:!1,cache:!1,beforeSend:function(xhr){$(".standard-payment-submit-btn").attr("disabled",!0),$(".fa-spin").show(),$(".standard-payment-submit-btn").text(submitting)}}).done((function(response){if(200!=response.data.status)return $(".fa-spin").hide(),$(".standard-payment-submit-btn").attr("disabled",!0),$("#stripeError").html(response.data.message),!1;window.location.replace(SITE_URL+"/crypto-exchange/success")}))}))}$("#Stripe").on("submit",(function(e){e.preventDefault(),confirmPayment()})),$("#month").on("change",(function(){makePayment()})),$("#year, #cvc").on("keyup",$.debounce(800,(function(){makePayment()}))),$("#cardNumber").on("keyup",$.debounce(800,(function(){makePayment()}))),document.getElementById("cardNumber").addEventListener("input",(function(e){var target=e.target,position=target.selectionEnd,length=target.value.length;target.value=target.value.replace(/[^\d]/g,"").replace(/(.{4})/g,"$1 ").trim(),target.selectionEnd=position+=" "===target.value.charAt(position-1)&&" "===target.value.charAt(length-1)&&length!==target.value.length?1:0})),$(document).on("click",".exchange-confirm-back-btn",(function(e){$(".spinner").addClass("d-none"),e.preventDefault(),exchangeBack()})),$(document).on("submit","#crypto_buy_sell_from",(function(){$(".standard-payment-submit-btn").attr("disabled",!0),$(".fa-spin").show(),setTimeout((function(){$(".fa-spin").hide(),$(".standard-payment-submit-btn").attr("disabled",!0)}),1e3)}))}if($("#paypal-payment-gateway").length){function exchangeBack(){localStorage.setItem("previousUrl",document.URL),window.history.back()}paypal.Buttons({createOrder:function(data,actions){return actions.order.create({purchase_units:[{amount:{value:totoalAmount}}]})},onApprove:function(data,actions){return actions.order.capture().then((function(details){window.location.replace(SITE_URL+"/crypto-exchange/paypal-payment/success/"+btoa(details.purchase_units[0].amount.value))}))}}).render("#paypal-button-container"),$(document).on("click",".exchange-confirm-back-btn",(function(e){e.preventDefault(),exchangeBack()}))}$(document).on("click",".from-currency",(function(){var value1=$(this).find(".coin-tag").text();$(".set-coinname").text(value1);var value2=$(this).find(".currency-img").attr("src");$(".set-img").attr("src",value2),$(".modal").modal("hide"),$("body").removeClass("modal-open"),$(".modal-backdrop").remove()})),$(document).on("click",".to-currency",(function(){var value3=$(this).find(".coin-tag").text();$(".set-coinnameTo").text(value3);var value4=$(this).find(".currency-img").attr("src");$(".set-imgTo").attr("src",value4),$(".modal").modal("hide"),$("body").removeClass("modal-open"),$(".modal-backdrop").remove()})),$(document).on("keyup","#fromInput",(function(){var value=$(this).val().toLowerCase();$("#from-currency-table tr").filter((function(){$(this).toggle($(this).text().toLowerCase().indexOf(value)>-1)}))})),$(document).on("keyup","#toInput",(function(){var value=$(this).val().toLowerCase();$("#to-currency-table tr").filter((function(){$(this).toggle($(this).text().toLowerCase().indexOf(value)>-1)}))}));